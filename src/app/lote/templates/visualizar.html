{% extends "base.html" %}
{% block content %}
<div class="section-header">    
    <div class="section-header-breadcrumb">
      <div class="breadcrumb-item active"><a href="/empresa">EMPRESA</a></div>
      <div class="breadcrumb-item">LISTAGEM</div>
    </div>
  </div>
<div class="row">
    <div class="col-12">
        <div class="row">
            <div class="col-sm-12  col-md-12 col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <h4>TAREFAS</h4>
                    </div>
                    <div class="card-body ">
                        <div class="table-responsive">
                                <table id="table-1" class="table table-striped " style="width:100%">     
                                <thead> 
                                    <tr>
                                    <th>#</th>
                                    <th>ENVIO</th>
                                    <th>RESPOSTA</th>
                                    <th>OBSERVAÇÃO</th>
                                    <th>STATUS</th>
                                    <th>CRIADO EM</th>
                                </tr>           
                                </thead> 
                                {% for tarefa in tarefa_data['items'] %}
                                <tr>                
                                    <td>{{ tarefa["id"] }}</td>
                                    <td>{{ tarefa["request_"] }}</td>
                                    <td>{{ tarefa["response_"] }}</td>
                                    <td>{{ tarefa["observacao"] }}</td>
                                                              
                                    <td>
                                        <div class="badge badge-primary">
                                            {{ tarefa["status"]["description"] }}
                                        </div>       
                                    </td>
                                    <td>{{ tarefa["create_at"]}}</td>
                                </tr>
                                {% endfor %}              
                            </table>              
                            <div class="card-footer text-right">
                                <nav class="d-inline-block">
                                  <ul class="pagination mb-0">
                                    <li class="page-item">
                                        {% if tarefa_data['page'] > 1 %}
                                            <a class="page-link" href="?page={{ tarefa_data['page']-1 }}" ><i class="fas fa-chevron-left"></i></a>
                                        {% endif %}
                                      </li>
                                      <li class="page-item active"><a class="page-link" href="#">{{ tarefa_data['page'] }}/{{ tarefa_data['pages'] }}<span class="sr-only">(current)</span></a></li> 
                                      <li class="page-item">
                                        {% if tarefa_data['page'] < tarefa_data['pages'] %}
                                            <a class="page-link" href="?page={{ tarefa_data['page']+1 }}"><i class="fas fa-chevron-right"></i></a>
                                        {% endif %}
                                      </li>
                                  </ul>
                                </nav>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>
          
          
            
</div>
{% endblock %}
{% block scripts %}    
    <script>
        $(document).ready(function() {
            $('#table-1').DataTable({
                "searching": false,   // Desativa a barra de pesquisa
                "paging": false,      // Desativa a paginação
                "responsive": true,   // Torna a tabela responsiva
                "columnDefs": [],
                "language": {
            "sEmptyTable": "Nenhum dado disponível na tabela",
            "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
            "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
            "sInfoFiltered": "(Filtrado de _MAX_ registros no total)",
            }
        });
        });
    </script>

    <script>
        $(document).ready(function() {
            $('#table-2').DataTable({
                "searching": false,   // Desativa a barra de pesquisa
                "paging": false,      // Desativa a paginação
                "responsive": true,   // Torna a tabela responsiva
                "columnDefs": [],
                "language": {
            "sEmptyTable": "Nenhum dado disponível na tabela",
            "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registros",
            "sInfoEmpty": "Mostrando 0 até 0 de 0 registros",
            "sInfoFiltered": "(Filtrado de _MAX_ registros no total)",
            }
        });
        });
    </script>
{% endblock %}